# CVE Remediation (Netty, Log4j, Base Image)

## Summary

Server Maven dependencies and the server Docker image were updated to address reported CVEs.

## Maven / Application Dependencies

| CVE         | Severity | Component                      | Previous     | Action                    |
|------------|----------|--------------------------------|-------------|---------------------------|
| CVE-2025-55163 | 8.2   | io.netty:netty-codec-http2    | 4.1.115.Final | Override to 4.1.130.Final |
| CVE-2025-24970 | 7.5   | io.netty:netty-handler         | 4.1.115.Final | Override to 4.1.130.Final |
| CVE-2025-58057 | 6.9   | io.netty:netty-codec           | 4.1.115.Final | Override to 4.1.130.Final |
| CVE-2025-67735 | 6.5   | io.netty:netty-codec-http      | 4.1.115.Final | Override to 4.1.130.Final |
| CVE-2025-25193 | 5.5   | io.netty:netty-common          | 4.1.115.Final | Override to 4.1.130.Final |
| CVE-2025-68161 | 6.3   | org.apache.logging.log4j:log4j-core | 2.24.1   | Bump to 2.25.3            |

**Implementation:** `MODULE.bazel` was updated to:

- Add explicit Netty artifacts at `4.1.130.Final` so they override Ktor’s transitive Netty 4.1.115.
- Bump `log4j-core` and `log4j-slf4j2-impl` from `2.24.1` to `2.25.3`.

Coursier resolves to the requested versions; the server build and tests pass with these changes.

## Base Image / glibc (deb)

| CVE         | Component              | Note |
|------------|------------------------|------|
| CVE-2025-15281 | deb/ubuntu/glibc    | Base image (eclipse-temurin:25-*-jammy) |
| CVE-2026-0915  | deb/ubuntu/glibc    | Base image |
| CVE-2026-0861  | deb/ubuntu/glibc    | Base image |
| CVE-2025-1546  | (listed in report)  | Base image / distro |

**Implementation:**

- In the server Dockerfile **runner** stage, `apt-get upgrade -y` was added so that base packages (including glibc) are upgraded when building the image. That picks up any security updates already published in the Ubuntu Jammy repos for the image build date.
- glibc fixes ultimately depend on Ubuntu and the Eclipse Temurin base image. Rebuild the image periodically and watch for newer `eclipse-temurin:25-jre-jammy` (or equivalent) tags that include updated distro packages.

## Verification

- `bazel build //server:delerium_server_deploy --config=ci`
- `bazel test //server:all_tests`
- Rebuild the server Docker image and run your usual health/smoke checks.

## References

- Netty: [4.1.118.Final](https://netty.io/news/2025/02/10/4-1-118-Final.html) (CVE-2025-24970, CVE-2025-25193); 4.1.130.Final is the current 4.1.x line.
- Log4j 2.x: [Apache Log4j 2](https://logging.apache.org/log4j/2.x/) — 2.25.3 used for CVE-2025-68161.
