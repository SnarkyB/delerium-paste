#name: Auto Release
#
#on:
#  push:
#    branches:
#      - main
#
#permissions:
#  contents: write
#
#jobs:
#  release:
#    name: Create Release
#    runs-on: ubuntu-latest
#    steps:
#      - name: Checkout code
#        uses: actions/checkout@v4
#        with:
#          fetch-depth: 0
#
#      - name: Extract version
#        id: get_version
#        run: |
#          # Extract version from client/package.json
#          VERSION=$(grep '"version":' client/package.json | head -1 | awk -F: '{ print $2 }' | sed 's/[", ]//g')
#          echo "Detected version: $VERSION"
#          echo "VERSION=v$VERSION" >> $GITHUB_OUTPUT
#
#      - name: Check if tag exists
#        id: check_tag
#        run: |
#          if git rev-parse "refs/tags/${{ steps.get_version.outputs.VERSION }}" >/dev/null 2>&1; then
#            echo "Tag ${{ steps.get_version.outputs.VERSION }} already exists."
#            echo "exists=true" >> $GITHUB_OUTPUT
#          else
#            echo "Tag ${{ steps.get_version.outputs.VERSION }} does not exist."
#            echo "exists=false" >> $GITHUB_OUTPUT
#          fi
#
#      - name: Create Tag
#        if: steps.check_tag.outputs.exists == 'false'
#        uses: actions/github-script@v7
#        with:
#          script: |
#            const tagName = '${{ steps.get_version.outputs.VERSION }}';
#
#            try {
#              await github.rest.git.createRef({
#                owner: context.repo.owner,
#                repo: context.repo.repo,
#                ref: `refs/tags/${tagName}`,
#                sha: context.sha
#              });
#              console.log(`Created tag ${tagName}`);
#            } catch (error) {
#              console.log(`Error creating tag: ${error.message}`);
#              throw error;
#            }
#
#      - name: Create Release
#        if: steps.check_tag.outputs.exists == 'false'
#        uses: softprops/action-gh-release@v1
#        with:
#          tag_name: ${{ steps.get_version.outputs.VERSION }}
#          name: Release ${{ steps.get_version.outputs.VERSION }}
#          generate_release_notes: true
#          draft: false
#          prerelease: false
