{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "clean",
      "type": "shell",
      "command": "make clean",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "clean-client",
      "type": "shell",
      "command": "rm -rf client/build client/js client/node_modules/.cache",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "clean-server",
      "type": "shell",
      "command": "cd server && ./gradlew clean",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "build-client",
      "type": "shell",
      "command": "cd client && npm run build",
      "problemMatcher": ["$tsc"],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "build-server",
      "type": "shell",
      "command": "cd server && ./gradlew build",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "test-client",
      "type": "shell",
      "command": "cd client && npm test",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    {
      "label": "test-server",
      "type": "shell",
      "command": "cd server && ./gradlew test",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      }
    },
    {
      "label": "docker-stop",
      "type": "shell",
      "command": "docker compose down",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "docker-deploy",
      "type": "shell",
      "command": "docker compose up -d",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "group": {
        "kind": "build",
        "isDefault": false
      }
    },
    {
      "label": "docker-logs",
      "type": "shell",
      "command": "docker compose logs -f",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "isBackground": true
    },
    {
      "label": "Full Pipeline: Clean, Build, Test & Deploy",
      "dependsOrder": "sequence",
      "dependsOn": [
        "clean",
        "clean-client",
        "clean-server",
        "build-client",
        "build-server",
        "test-client",
        "test-server",
        "docker-stop",
        "docker-deploy"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "clear": true
      },
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "Quick Deploy: Build & Deploy (No Tests)",
      "dependsOrder": "sequence",
      "dependsOn": [
        "clean",
        "build-client",
        "build-server",
        "docker-stop",
        "docker-deploy"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "clear": true
      }
    }
  ]
}
